<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layouts/search_template}">
<head>
	<title>OUR SPACE</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="/static/css/style.css" th:href="@{/css/style.css}"/>
	 <!-- Bootstrap core CSS -->
  	<link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  	<!-- Custom styles for this template -->
  	<link href="/css/modern-business.css" rel="stylesheet">
  	
  	<!-- Theme CSS -->
	<link href="/css/freelancer.min.css" rel="stylesheet">
	
	<link href="/css/radio.css" rel="stylesheet">
	
	<!-- DatePicker -->
	<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT" crossorigin="anonymous"></script>
  	<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  	<link type="text/css" rel="stylesheet" href="/css/jquery-datepicker.css">
	
	<!-- swiper -->
	<link rel="stylesheet" href="/css/swiper.min.css">
	
	
	<style>
	.pc .tags .tag {
	    margin: 6px 6px 6px 0;
	    padding: 0 15px;
	    height: 29px;
	    font-size: 14px;
	    line-height: 29px;
	    border-radius: 29px;
	}
	.tags .tag {
	    display: inline-block;
	    margin: 0 3px 5px 0;
	    padding: 0 8px;
	    height: 22px;
	    line-height: 22px;
	    background-color: #fff;
	    border: 1px solid #e0e0e0;
	    color: #656565;
	    border-radius: 22px;
	    font-size: 11px;
	}
	.pc .text_box .h_copy {
	    padding: 50px 100px 0 0;
	    font-size: 48px;
	    line-height: 60px;
	}
	
	.text_box .h_copy {
	    padding: 31px 0 0;
	    font-size: 24px;
	    line-height: 32px;
	    word-break: keep-all;
	    word-wrap: break-word;
	    font-family: NanumBarunGothicUltralight,sans-serif;
	}
	
	.swiper-box {
		height: 50px;
		padding: 15 5;
		font-size: 10px;
		text-align: center;
		cursor: pointer;
		background-color: orange;
		border-style: solid;
  		border-color: #d28800;
  		
  		
	}
	
	
		
	</style>
		
</head>
<body class="pc">
<div layout:fragment="content">
	<div class="w-75 p-5">
		<div class="row">
			<div class="col-lg-8" th:object="${basicInfo}">
				<h2 class="text-left" th:text="*{spaceName}">공간명</h2>
				<p class="text-left" th:text="*{spaceHead}">공간 한줄 소개</p>
				<div data-v-acdc6bb0="" class="text-left tags">
					<span class="tag" th:text="*{spaceTag}"></span>
				</div>
				<hr>
				
				<div>
					<img class="card-img-top" th:src="@{|/space/displayFile?fileName=${spaceBasicImg.fullName}|}" alt="spaceImg">
				</div>
					
				<div class="text_box">
					<h3 class="h_copy text-left lead" th:text="*{spaceHead}"></h3>
				</div>
				
				<div class="m-t-100 m-b-20">
					<h4 class="text-left">공간 소개</h4>
					<hr>
					<div class="m-t-20 m-b-10">
						<p class="lead" th:text="*{spaceIntro}"></p>
					</div>
				</div>
				
<!-- 				<div class="m-t-20 m-b-20"> -->
<!-- 					<h4 class="text-left">시설 안내</h4> -->
<!-- 					<hr> -->
<!-- 					<div class="m-t-20 m-b-10"> -->
<!-- 						<p class="lead" th:text="*{spaceIntro}"></p> -->
<!-- 					</div> -->
<!-- 				</div> -->
				
				<div class="m-t-100 m-b-20">
					<h4 class="text-left">예약시 주의사항</h4>
					<hr>
					<div class="m-t-20 m-b-10">
						<p class="lead" th:text="*{spaceCaution}"></p>
					</div>
				</div>
				
				<div class="m-t-100 m-b-20">
					<h4 class="text-left">환불규정 안내</h4>
					<p class="m-t-40 m-b-20 text-left lead">
						이용당일(첫 날) 이후에 환불 관련 사항은 호스트에게 직접 문의하셔야 합니다.     <br>
						결제 후 2시간 이내에는 100% 환불이 가능합니다.(단, 이용시간 전까지만 가능)   <br>
					</p>
					<table class="table" th:object="${refundInfo}">
						<tr>
							<td>이용 8일 전</td>
							<td>총 금액의 [[*{ddayEight}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 7일 전</td>
							<td>총 금액의 [[*{ddaySeven}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 6일 전</td>
							<td>총 금액의 [[*{ddaySix}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 5일 전</td>
							<td>총 금액의 [[*{ddayFive}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 4일 전</td>
							<td>총 금액의 [[*{ddayFour}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 3일 전</td>
							<td>총 금액의 [[*{ddayThree}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 2일 전</td>
							<td>총 금액의 [[*{ddayTwo}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 전날</td>
							<td>총 금액의 [[*{ddayOne}]] % 환불</td>
						</tr>
						<tr>
							<td>이용 당일</td>
							<td>환불 불가</td>
						</tr>
					
					</table>					
					<hr>
					
					
					<div class="border m-t-100 m-b-100 p-5 text-left">
						<h2 class="text-left" th:text="*{spaceName}"></h2>
						<div class="m-t-30">
						<span class="lead" th:text="*{spaceAddr}"></span>
						<span class="lead" th:text="*{spaceAddrdetail}"></span>
						</div>
					</div>
					
				</div>
				
				
			</div>
			<div class="col-lg-4 m-t-140">
				<h5>세부공간 선택</h5>
				<hr>
				<div class="p-3">
					<span>호스트의 승인을 기다릴 필요 없이 <br> 지금 바로 예약 하세요!</span>
				</div>
			  <div class="radio-group text-left" th:each="roomList : ${roomList}">
			  	  <div class="row border-bottom p-t-20">
					  <div class="radio col-8">
					    <input th:id="|radio-${roomList.roomNum}|" name="roomNum" type="radio" class="room-radio">
					    <label th:for="|radio-${roomList.roomNum}|" th:text="${roomList.roomName}" class="radio-label"></label>
					  </div>
					  <div class="col-3 p-2">
						  <span th:text="|${roomList.price} 원|"></span>
					  </div>
					  <div th:id="|roombox-${roomList.roomNum}|" class="room-box border border-primary">
					  	<div class="img-box p-4">
					  		<img th:src="@{|/space/displayFile?fileName=${spaceBasicImg.fullName}|}" alt="mainImg" class="w-100">
					  	</div>
					  	<div class="room-intro p-4">
					  		<p th:text="${roomList.roomIntro}" class="p-b-40 border-bottom"></p>
					  	</div>
					  	<div class="room-detail p-4">
					  		<div class="row m-t-20 m-b-20">
					  				<span class="col-4">- 공간유형</span>
					  				<span class="col-8" th:text="${roomList.roomCategory}"></span>
					  		</div>
					  		<div class="row m-t-20 m-b-20">
					  				<span class="col-4">- 예약시간</span>
					  				<span class="col-8" th:text="|최소  ${roomList.reservMinTime} 시간 부터|"></span>
					  		</div>
					  		<div class="row m-t-20 m-b-20">
					  				<span class="col-4">- 예약인원</span>
					  				<span class="col-8" th:text="|최소 ${roomList.reservMinMan}명   ~ 최대 ${roomList.reservMaxMan}명|"></span>
					  		</div>
					  		<div class="row m-t-20 m-b-20">
					  				<span class="col-4">- 룸 옵션</span>
					  				<span class="col-8" th:text="${roomList.roomOption}"></span>
					  		</div>
					  	</div>
						<div class="room_reserv p-4">
						  		<div class="border-top border-primary p-4">
						  			<span><strong>예약 선택</strong></span>
						  		</div>
						  		<div class="border-top  p-4">
						  			<div class="radio-group">
							  		<div class="radio">
							  			<input th:id="|radio-time-${roomList.roomNum}|" name="roomNum" type="checkbox" class="time-radio">
						    			<label th:for="|radio-time-${roomList.roomNum}|" th:text="|시간 단위 예약하기 최소  ${roomList.reservMinTime} 시간 부터|" class="radio-label"></label>
						    		</div>
						    		</div>
							  	</div>
							  	<div th:id="|datebox-${roomList.roomNum}|" class="date-box">
								  	<div class="pick-date border-bottom border-primary p-4 text-left">
								  		<span><strong>날짜 선택</strong></span>
								  	</div>
								    <div class="m-b-250">
									  	<div class="jquery-datepicker">
									     	 <input th:id="|datepicker-${roomList.roomNum}|" type="text" class="date-picker jquery-datepicker__input date-input m-b-200">
									  	</div>
									</div>  
								</div>
								<div th:id="|timebox-${roomList.roomNum}|" class="time-box">
									<div class="pick-time border-bottom border-primary p-4">
										<div class="row">
									  		<span class="col-6 text-left"><strong>시간 선택</strong></span>
									  		<span class="col-6 text-right"><strong></strong></span>
								  		</div>
								  	</div>
								  	<div class="m-t-30 m-b-20">
										<div class="swiper-container" style="margin-bottom: -150px;">
											<ol class="swiper-wrapper" style="width: 300px;">
												 <li class="swiper-slide" th:each="num : ${#numbers.sequence(0,23)}">
												 	<div class="text-left" th:if="${num == 0}">오전</div>
												 	<div class="text-left" th:if="${num == 12}">오후</div>
												 	<div class="text-left" th:if="${num != 0 && num !=12}">.</div>
											      	<span class="text-left selected-time" th:text="${num}"></span>
											      	<div th:id="|time-${roomList.roomNum}-${num}|" th:text="${roomList.price}" class="swiper-box"></div>
											      </li>
										    </ol>
										    <div class="m-t-200">
											    <div class="swiper-button-next"></div>
											    <div class="swiper-button-prev"></div>
										    </div>
									  </div>						  		
								  	</div>
							  	</div>
							  	
							  	<div class="result-box">
								  	<div class="p-4">
							  			<span><strong>예약 일시</strong></span>
							  		</div>
							  		<div class="row p-2">
							  			<div class="col-6"> 
								  			<span th:id="|result-date-${roomList.roomNum}|" class="reserv-result"></span>
							  			</div>
							  			<div class="col-6">
								  			<span th:id="|result-startTime-${roomList.roomNum}|" class="reserv-startTime"></span>
								  			<span> 시 ~ </span>
								  			<span th:id="|result-endTime-${roomList.roomNum}|" class="reserv-endTime"></span>
								  			<span> 시 </span>
								  			<span> 총 </span>
								  			<span th:id="|result-totalTime-${roomList.roomNum}|" class="reserv-totalTime"></span>
								  			<span> 시간 </span>
							  			</div>
							  			
							  			
							  			
							  		</div>
						  		</div>
						  		
						  		<div th:id="|manbox-${roomList.roomNum}|" class="man-box">
								  	<div class="p-4 border-bottom border-primary">
							  			<span><strong>예약 인원</strong></span>
							  			<br>
							  			<span>( 최소  </span>
							  			<span th:id="|reserv-minman-${roomList.roomNum}|" th:text="${roomList.reservMinMan}"></span>
							  			<span>명 ~  최대 </span>
							  			<span th:id="|reserv-maxman-${roomList.roomNum}|" th:text="${roomList.reservMaxMan}"></span>
							  			<span>명 )</span>
							  		</div>
							  		
							  		<div class="man-picker m-2 row border" style="font-size: 1.5rem; height: 56px;">
							  			<div th:id="|minus-btn-${roomList.roomNum}|" class="minus-btn col-2 p-t-6 p-b-6 bg-light text-center" style="cursor: pointer;">
							  				<span class="p-t-10">-</span>
							  			</div>
							  			<div  class="reserv-man col-8 p-t-6 p-b-6 border-left border-right text-center">
							  				<span th:id="|reserv-man-${roomList.roomNum}|" class="" th:text="${roomList.reservMinMan}"></span>
							  			</div>
							  			<div th:id="|plus-btn-${roomList.roomNum}|" class="plus-btn col-2 p-t-6 p-b-6 bg-light text-center" style="cursor: pointer;"> 
							  				<span class="p-t-10">+</span>
							  			</div>
							  		</div>
						  		</div>
						  		
						  		<div th:id="|paybox-${roomList.roomNum}|" class="pay-box">
								  	<div class="p-4 border-bottom border-primary">
							  			<span><strong>공간사용료</strong></span>
					
							  		</div>
							  		<div class="total-pay row m-t-40">
							  			<div class="col-8 text-right">
							  				<h3>&#8361;</h3>
							  			</div>
							  			<div class="col-4 text-right">
							  				<h3 th:id="|totalpay-${roomList.roomNum}|" class="text-right"></h3>
							  			</div>
							  		</div>
							  	</div>
							  	
							  	</div>
							  	<form th:id="|reservInfo-${roomList.roomNum}|" action="" th:action="@{|/space/${spaceNum}|}" th:object="${reservInfo}" method="POST">
									<input type="hidden" th:id="|reserv-spaceNum-${roomList.roomNum}|" 		name="spaceNum" th:value="${roomList.spaceNum}" > 							  		
									<input type="hidden" th:id="|reserv-roomNum-${roomList.roomNum}|" 		name="roomNum" th:value="${roomList.roomNum}" > 							  		
									<input type="hidden" th:id="|reserv-reservDate-${roomList.roomNum}|" 	name="reservDate" > 							  		
									<input type="hidden" th:id="|reserv-reservMan-${roomList.roomNum}|" 	name="reservMan" > 							  		
									<input type="hidden" th:id="|reserv-startTime-${roomList.roomNum}|"  	name="startTime"> 							  		
									<input type="hidden" th:id="|reserv-endTime-${roomList.roomNum}|" 		name="endTime"> 							  		
									<input type="hidden" th:id="|reserv-timeList-${roomList.roomNum}|" 		name="timeList"> 							  		
									<input type="hidden" th:id="|reserv-totalTime-${roomList.roomNum}|" 	name="totalTime"> 							  		
									<input type="hidden" th:id="|reserv-totalPay-${roomList.roomNum}|" 		name="totalPay"> 							  		
									<input type="hidden" th:id="|reserv-userId-${roomList.roomNum}|" 		name="userId" th:value="${userId}" > 							  		
									<input type="hidden" th:id="|reserv-hostId-${roomList.roomNum}|"		name="hostId" th:value="${roomList.CreatedBy}" > 							  		
							  	</form>
							  	
							  	<div class="p-t-20 p-b-20 border border-primary bg-primary text-center">
							  		<a th:id="|btnReserv-${roomList.roomNum}|" href="javascript:void(0)" class="btnReserv" style="text-decoration: none; font-size: 1.45rem; color: white;">
										바로 예약하기
									</a>
	  							</div>
						
							  	
					 </div>
				  </div>
			  </div>
		 </div>
	</div>
</div>
	
	<script type="text/javascript" src="/js/jquery-datepicker.js"></script>
	<script src="/js/swiper.min.js"></script>
	<script type="text/javascript" th:inline="javascript">
		$(document).ready(function() { 
			
		    $('.room-box').hide();
		    $('.date-box').hide();
		    $('.time-box').hide();
		    $('.result-box').hide();
		    $('.man-box').hide();
			$('.jquery-datepicker').datepicker();
// 		    $('.jquery-datepicker__panel').show();

		});
		
		
		$(".btnReserv").on("click", function() {
			var btnReservObj = $(this);
			var btnReservId = btnReservObj.attr("id");
			btnReservId = btnReservId.split("-");
			var roomNum = btnReservId[1];
			
			var reservDate 				= $("#datepicker-" + roomNum).val();
			var reservMan  				= $("#reserv-man-" + roomNum).text();
			var reservStartTime 		= $("#result-startTime-" + roomNum).text();
			var reservEndTime 			= $("#result-endTime-" + roomNum).text();
			var reservTotalTime 		= $("#result-totalTime-" + roomNum).text();
			var totalPay 				= $("#totalpay-" + roomNum).text();
			
			
			$("#reserv-reservDate-" + roomNum).val(reservDate);
			$("#reserv-reservMan-" + roomNum).val(reservMan);
			$("#reserv-startTime-" + roomNum).val(reservStartTime);
			$("#reserv-endTime-" + roomNum).val(reservEndTime);
			$("#reserv-totalTime-" + roomNum).val(reservTotalTime);
			$("#reserv-totalPay-" + roomNum).val(totalPay);
			
// 			console.log("reserv-reservDate :" + reservDate );
// 			console.log("reserv-reservMan :" + reservMan );
// 			console.log("reserv-startMan :" + reservStartTime );
// 			console.log("reserv-endTime :" + reservEndTime );
// 			console.log("reserv-totalTime :" + reservTotalTime );
// 			console.log("reserv-totalPay :" + totalPay );
			
// 			var reserv_spaceNum 		= $("#reserv-spaceNum-" + roomNum).val();			
// 			var reserv_roomNum			= $("#reserv-roomNum-"+ roomNum).val();		
// 			var reserv_reservDate		= $("#reserv-reservDate-"+ roomNum).val();	
// 			var reserv_reservMan		= $("#reserv-reservMan-"+ roomNum).val();	
// 			var reserv_startTime		= $("#reserv-startTime-"+ roomNum).val();	
// 			var reserv_endTime			= $("#reserv-endTime-"+ roomNum).val();	
// 			var reserv_timeList			= $("#reserv-timeList-"+ roomNum).val();	
// 			var reserv_totalTime		= $("#reserv-totalTime-"+ roomNum).val();	
// 			var reserv_totalPay			= $("#reserv-totalPay-"+ roomNum).val();	
// 			var reserv_userId			= $("#reserv-userId-"+ roomNum).val();	
// 			var reserv_hostId			= $("#reserv-hostId-"+ roomNum).val();	
			
// 			console.log("reserv_spaceNum :" + reserv_spaceNum );
// 			console.log("reserv_roomNum :" + reserv_roomNum );
// 			console.log("reserv_reservDate :" + reserv_reservDate );
// 			console.log("reserv_reservMan :" + reserv_reservMan );
// 			console.log("reserv_startTime :" + reserv_startTime );
// 			console.log("reserv_endTime :" + reserv_endTime );
// 			console.log("reserv_timeList :" + reserv_timeList );
// 			console.log("reserv_totalTime :" + reserv_totalTime );
// 			console.log("reserv_totalPay :" + reserv_totalPay );
// 			console.log("reserv_userId :" + reserv_userId );
// 			console.log("reserv_hostId :" + reserv_hostId );
			
			
			
			var formObj = $("#reservInfo-" + roomNum);
			
// 			$.post("/space/" + reserv_spaceNum , formObj.serialize(), function(data){
				
// 			});
			formObj.submit();
			
		});
		
		var totalPay = -1;
		var totalMan = -1;
		var total = -1;
		
		
		$(".room-radio").on("click",function(){
			var roomInputId = $(this).attr("id");
			roomInputId = roomInputId.split("-");
			var roomNum = roomInputId[1];
			var roomBox = "roombox-" + roomNum;
			$("#"+roomBox).show();

			
// 			var offset = $(this).offset();
//            $("html body").animate({scrollTop:offset.top},1000);

			
		});
		
		$(".time-radio").on("click",function(){
			var timePickId = $(this).attr("id");
			timePickId = timePickId.split("-");
			var roomNum = timePickId[2];
			var dateBox = "datebox-" + roomNum;
			var datePicker= "datepicker-" + roomNum;
			var manBox = "manbox-" + roomNum;
			// alert(dateBox);
			$("#"+dateBox).show();
			$("#"+manBox).show();
			$("#"+datePicker).click();
			
 			$(".jquery-datepicker__day").children().attr("onclick","dayClick(this)");
 			
		});
		
		
		// datepicker 에서 날짝 클릭할 때
		function dayClick(day) {
			var clickDay =  day.innerHTML;
			$(".time-box").show();
		}

		/* 룸 선택 radio-input */
		$('input[type="radio"]').change(function() {
			$('.room-box').hide();
		    $('.date-box').hide();
		    $('.time-box').hide();
		    $('input[type="checkbox"]').prop("checked", false);
		    
			var roomInputId = $(this).attr("id");
			roomInputId = roomInputId.split("-");
			var roomNum = roomInputId[1];
			var roomBox = "roombox-" + roomNum;
			
			initValue(roomNum);		    
			$("#"+roomBox).show();
			$(".jquery-datepicker__panel").hide();
			$("#"+datePicker).click();
		});
		
		
		/* 시간단위 예약 checkbox-input */
		$('input[type="checkbox"]').change(function() {
			var radioTimeInputObj = $(this);
			var checkedStatus = radioTimeInputObj.is(":checked");
    		
			var radioTimeInputId = radioTimeInputObj.attr("id");
		 	radioTimeInputId = radioTimeInputId.split("-");
		 	var roomNum = radioTimeInputId[2];
			
			if ( !checkedStatus ) {
				// checkbox 해제 시,
				$('.date-box').hide();
	 		    $('.time-box').hide();
	 		    $(".jquery-datepicker__panel").hide();
			}
			else {
				// checkbox 클릭 시,
				$('.date-box').show();
			}
			
			 initValue(roomNum);
			 
		});
		
		
		
		
		/* 선택한 예약날짜 확인 */
		$(".date-input").change(function() {
			var input = $(this);
			var date = input.val();
			//alert(date);
		})
		
		
		
		
		
		/* 총 예약 시간/가격 */
		var totalPrice = 0;
		var totalTime = 0;
		var timeArray = new Array();
		$(".swiper-box").on("click",function(){
			var box = $(this);
			var price = $(this).text();
			var time = $(this).prev().text();
			
			console.log("지금 선택한 시간 : " + time);
			
			if( timeArray.includes(time) )  {
				var index = timeArray.indexOf(time);
				timeArray.splice(index,1);
				timeArray.sort(function(a, b) {
				  return a - b;
				});
				totalPrice -= Number(price);
				
// 				box.css("background-color", "orange");
// 				box.css("border-color", "#d28800");
// 				box.css("color", "black");
			}
			else {
				timeArray.push(time);
				timeArray.sort(function(a, b) {
				  return a - b;
				});
				totalPrice += Number(price);
				
// 				box.css("background-color", "#1abc9c");
// 				box.css("border-color", "#018e72");
// 				box.css("color", "white");
			}
			
			
			
			totalTime = timeArray.length;
			
			var timeArrayMax = timeArray[timeArray.length - 1];
			var timeArrayMin = timeArray[0];
			 
			console.log("선택 시간: " + timeArray);
			console.log("총 예약 시간: " + totalTime);
			console.log("총 예약 가격: " + totalPrice);
			console.log("예약 시작시간: " + timeArrayMin);
			console.log("예약 종료시간: " + timeArrayMax);
			
			
			
			var timeStr = timeArrayMin + "시 ~ " + timeArrayMax + "시";
			timeStr = timeStr + " 총  " + totalTime + " 시간";
			
			
			var timeBoxId = box.parent().parent().parent().parent().parent().attr("id");
			var roomNum = timeBoxId.split("-");
// 			alert("timeBoxId : " +  timeBoxId);
			roomNum = roomNum[1]; 	
// 			alert("roomNum : " +  roomNum);


			// input[name=timeList] 에 값 넣어주기
			var timeList = timeArray.toString();
			$("#reserv-timeList-" + roomNum).val(timeList);



			$("#result-startTime-" + roomNum).text(timeArrayMin);
			if( totalTime == 1 ){
				var minEndTime = Number(timeArrayMin) + 1;
				$("#result-endTime-" + roomNum).text(minEndTime);
			} else {
				$("#result-endTime-" + roomNum).text(timeArrayMax);
			}
			$("#result-totalTime-" + roomNum).text(totalTime);
			
			
			if( totalTime == 0 ){
				$('.result-box').hide();
			} else {
				$('.result-box').show();
			}
					
			
			totalMan = $("#reserv-man-" + roomNum).text();
			totalPay = totalPrice;
			total = totalPay * totalMan;
			
			if( total < 0 ) {
				alert("문제가 발생했습니다. 다시 입력해주세요.");
				initValue(roomNum);
			}
			else {
				$("#totalpay-" + roomNum).text(total);
			}

			
			/* 선택된 시간 버튼 음영과 실제 선택된 값을 동기화 시켜주기 위함 */
			$(".swiper-box").css("background-color", "orange");
			$(".swiper-box").css("border-color", "#d28800");
			$(".swiper-box").css("color", "black");
			
			
// 			alert("roomNum : " + roomNum);
			if( timeArray.length == 0 ) {
				totalPrice = 0;
				totalTime = 0;
			} else {
				timeArray.forEach(function(i){
					$("#time-" + roomNum + "-" + i).css("background-color", "#1abc9c");		
					$("#time-" + roomNum + "-" + i).css("border-color", "#018e72");
					$("#time-" + roomNum + "-" + i).css("color", "white");
				});
			}
			
		});
		
		
		/* 날짜 변경 시 */
		$(".date-picker").on("change", function() {
			var datePickerObj = $(this);
			var datePickerId = datePickerObj.attr("id");
			datePickerId = datePickerId.split("-");
			
			var roomNum = datePickerId[1];
			var reservDate = datePickerObj.val();
			var dateResult = reservDate.split("/");
			
			dateResult = dateResult[0] + "-" + dateResult[1] + "-" + dateResult[2];
			var dateStr = dateResult.split("-");
			
			dateStr = dateStr[0] + "년 " + dateStr[1] + "월 " + dateStr[2] + "일 "; 
			console.log(dateStr);
			
			var week = ['일', '월', '화', '수', '목', '금', '토'];
			var dayOfWeek = week[new Date(dateResult).getDay()];
			
			dateStr = dateStr + "(" + dayOfWeek + ")";
			
			
			$("#result-date-" + roomNum).text(dateStr);
			
			initValue(roomNum);
// 			alert(reservDate);
		});
		
		
		
		/* 예약 인원 제어 (-) */
		$(".minus-btn").on("click", function(){
			var minusBtnObj = $(this);
			var minusBtnId = minusBtnObj.attr("id");
			var roomNum = minusBtnId.split("-");
			roomNum = roomNum[2];
			
			var reservManId = "reserv-man-" + roomNum;
			var manValue = $("#" + reservManId).text();
			
			var reservMinMan = $("#reserv-minman-" + roomNum).text();
			
			if( manValue > reservMinMan ) {
				manValue--;
			} else {
				alert("최소인원은 " + reservMinMan + "명 입니다.");
			}
			
			
			if(totalPay == -1){
				alert("예약시간을 먼저 선택해주세요.");
				return 0;
			} else {
				totalMan = manValue;
				total = totalPay * totalMan;
				if( total < 0 ) {
					alert("문제가 발생했습니다. 다시 입력해주세요.")
				}
				else {
					$("#totalpay-" + roomNum).text(total);
				}
			}
			$("#" + reservManId).text(manValue);
		
		});
		
		
		/* 예약 인원 제어 (+) */
		$(".plus-btn").on("click", function(){
			var plusBtnObj = $(this);
			var plusBtnId = plusBtnObj.attr("id");
			var roomNum = plusBtnId.split("-");
			roomNum = roomNum[2];
			
			var reservManId = "reserv-man-" + roomNum;
			var manValue = $("#" + reservManId).text();
			
			var reservMaxMan = $("#reserv-maxman-" + roomNum).text();
			
			if( manValue < reservMaxMan ) {
				manValue++;
			} else {
				alert("최대인원은 " + reservMaxMan + "명 입니다.");
			}
			
			
			if(totalPay == -1){
				alert("예약시간을 먼저 선택해주세요.");
				return 0;
			} 
			else {
				totalMan = manValue;
				total = totalPay * totalMan;
				if( total < 0 ) {
					alert("문제가 발생했습니다. 다시 입력해주세요.")
				}
				else {
					$("#totalpay-" + roomNum).text(total);
				}
			}
			
			$("#" + reservManId).text(manValue);
		});
		
		
		function initValue(roomNum) {
			totalPay = -1;
			totalMan = -1;
			total = -1;
			totalPrice = 0;
			totalTime = 0;
			timeArray = new Array();
			
			$("#totalpay-" + roomNum).text("0");
		}
		
		
		


		
		
		
	</script>
	 <!-- Initialize Swiper -->
	  <script>
	    var swiper = new Swiper('.swiper-container', {
	      slidesPerView: 7,
	      centeredSlides: true,
	      spaceBetween: 0,
	      pagination: {
	        el: '.swiper-pagination',
	        clickable: true,
	      },
	      navigation: {
	        nextEl: '.swiper-button-next',
	        prevEl: '.swiper-button-prev',
	      },
	    });
	    
	    
	    
	  </script>
		
	

</div>
</body>